<!DOCTYPE html>
<html>
  <head>
    <style>
      html,
      body {
        padding: 0;
        margin: 0;
        overflow: hidden;
      }

      iframe,
      object {
        width: 100%;
        height: 100vh;
        border: none;
      }
    </style>
  </head>

  <body>
    <!-- <iframe id="iframe1" src="https://www.jianshu.com/p/99f2d3a9b68a"></iframe> -->
    <object
      id="object1"
      data="https://www.jianshu.com/p/99f2d3a9b68a"
      type="text/html"
    >
      html object
    </object>
    <script>
      fetch("data.json").then((res) =>
        res.json().then((data) => {
          console.log(data);

          let postsArr = data.jianshuArr.concat(data.juejinArr);
          let max = postsArr.length - 1;
          console.log("posts arr length: ", max);
          let min = 0;

          let setIntervalTime = 10000;
          let min2 = 10000;
          let max2 = 90000;

          let iframe1 = document.getElementById("iframe1");
          let object1 = document.getElementById("object1");
          setInterval(async () => {
            const index = parseInt(Math.random() * (max - min + 1) + min, 10);
            const url = postsArr[index];

            let currentHours = new Date().getHours();
            if (currentHours < 21 && currentHours > 8) {
              // iframe1.src = url
              object1.data = url;
            }

            setIntervalTime = parseInt(
              Math.random() * (max2 - min2 + 1) + min2,
              10
            );
            console.log("setIntervalTime: ", setIntervalTime);
          }, setIntervalTime);
        })
      );
    </script>
  </body>
</html>
